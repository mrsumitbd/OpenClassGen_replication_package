class DynamoMappings(object):
    '''Attribute mapping class.

    DynamoDB has some opinions about what you can store or query in an
    attribute. We're going to use mappings to fix that.
    '''

    @staticmethod
    def map_index_val(index_val):
        '''Xform index_val so that it can be stored/queried.'''
        if index_val is None:
            return None
        # Convert to string since DynamoDB has limitations on data types
        return str(index_val)

    @staticmethod
    def unmap_stored_val(stored_val):
        '''Inverse of index_val_mapping.

        Note that we currently don't use it because we don't actually read back
        index values (since they are generated by Python functions).
        '''
        if stored_val is None:
            return None
        # Attempt to convert back to original type
        # Try int first
        try:
            return int(stored_val)
        except ValueError:
            pass
        # Try float
        try:
            return float(stored_val)
        except ValueError:
            pass
        # Return as string if conversion fails
        return stored_val